<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="394px" preserveAspectRatio="none" style="width:1522px;height:394px;background:#FFFFFF;" version="1.1" viewBox="0 0 1522 394" width="1522px" zoomAndPan="magnify"><defs><filter height="300%" id="fozurdh04oxxt" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#F8F8F8" filter="url(#fozurdh04oxxt)" height="375.6094" rx="12.5" ry="12.5" style="stroke:#383838;stroke-width:1.5;" width="1503.8461" x="7" y="7"/><rect fill="#FFFFFF" height="342" rx="12.5" ry="12.5" style="stroke:#FFFFFF;stroke-width:1.0;" width="1497.8461" x="10" y="37.6094"/><line style="stroke:#383838;stroke-width:1.5;" x1="7" x2="1510.8461" y1="34.6094" y2="34.6094"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="182" x="667.923" y="26.5332">TimerSecureTurnstileFSM</text><g id="TimerSecureTurnstileFSM.LOCKED"><rect fill="#F8F8F8" filter="url(#fozurdh04oxxt)" height="50" rx="12.5" ry="12.5" style="stroke:#383838;stroke-width:1.5;" width="78" x="465.8501" y="85.6094"/><line style="stroke:#383838;stroke-width:1.5;" x1="465.8501" x2="543.8501" y1="113.2188" y2="113.2188"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="58" x="475.8501" y="105.1426">LOCKED</text></g><g id="TimerSecureTurnstileFSM.UNLOCKED"><rect fill="#F8F8F8" filter="url(#fozurdh04oxxt)" height="50" rx="12.5" ry="12.5" style="stroke:#383838;stroke-width:1.5;" width="98" x="455.8501" y="314.6094"/><line style="stroke:#383838;stroke-width:1.5;" x1="455.8501" x2="553.8501" y1="342.2188" y2="342.2188"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="78" x="465.8501" y="334.1426">UNLOCKED</text></g><!--MD5=[5d767a4319f708ea6a1e1270c7244025]
link LOCKED to LOCKED--><path d="M544.0121,102.3204 C554.1811,102.8304 561.8501,105.5934 561.8501,110.6094 C561.8501,114.7634 556.5911,117.3724 549.0081,118.4354 " fill="none" id="LOCKED-to-LOCKED" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="544.0121,118.8984,553.3428,122.0507,548.9907,118.4369,552.6045,114.0849,544.0121,118.8984" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="120" x="567.8501" y="73.1792">CARD [{cardId-&gt;</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="184" x="583.8501" y="90.1528">requireNotNull(cardId);</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="312" x="583.8501" y="107.1265">isOverrideCard(cardId)&amp;&amp;overrideActive;</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="56" x="567.8501" y="124.1001">}] -&gt; {</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="128" x="583.8501" y="141.0737">cancelOverride()</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="8" x="567.8501" y="158.0474">}</text><!--MD5=[5d767a4319f708ea6a1e1270c7244025]
link LOCKED to LOCKED--><path d="M544.1231,101.1594 C645.5311,88.9214 901.8501,92.0714 901.8501,110.6094 C901.8501,128.8404 653.9701,132.1894 549.3001,120.6564 " fill="none" id="LOCKED-to-LOCKED-1" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="544.1231,120.0594,552.6055,125.0642,549.0902,120.6322,553.5221,117.1168,544.1231,120.0594" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="120" x="907.8501" y="73.1792">CARD [{cardId-&gt;</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="184" x="923.8501" y="90.1528">requireNotNull(cardId);</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="184" x="923.8501" y="107.1265">isOverrideCard(cardId);</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="56" x="907.8501" y="124.1001">}] -&gt; {</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="144" x="923.8501" y="141.0737">activateOverride()</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="8" x="907.8501" y="158.0474">}</text><!--MD5=[c03bbcbe1ea2187b5aae6c6faf6bf9ae]
link LOCKED to UNLOCKED--><path d="M465.5421,112.4984 C364.8801,115.6854 101.9967,130.0524 48.8497,193.6094 C19.4837,228.7274 18,262.7874 48.8497,296.6094 C75.4764,325.8012 335.7251,334.9824 450.7051,337.628 " fill="none" id="LOCKED-to-UNLOCKED" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="455.7361,337.7417,446.8299,333.537,450.7374,337.6274,446.647,341.5349,455.7361,337.7417" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="120" x="49.8497" y="207.6792">CARD [{cardId-&gt;</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="184" x="65.8497" y="224.6528">requireNotNull(cardId);</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="288" x="65.8497" y="241.6265">overrideActive||isValidCard(cardId);</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="56" x="49.8497" y="258.6001">}] -&gt; {</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="64" x="65.8497" y="275.5737">unlock()</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="8" x="49.8497" y="292.5474">}</text><!--MD5=[5d767a4319f708ea6a1e1270c7244025]
link LOCKED to LOCKED--><path d="M543.9711,98.9624 C680.1641,77.7094 1113.8461,81.5914 1113.8461,110.6094 C1113.8461,139.2594 691.1051,143.4074 549.3001,123.0534 " fill="none" id="LOCKED-to-LOCKED-2" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="543.9711,122.2564,552.2801,127.5441,548.916,122.9963,553.4639,119.6322,543.9711,122.2564" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="120" x="1119.8461" y="64.6792">CARD [{cardId-&gt;</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="360" x="1135.8461" y="81.6528">requireNotNull(cardId){"cardId is required"};</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="168" x="1135.8461" y="98.6265">!isValidCard(cardId);</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="120" x="1119.8461" y="115.6001">}] -&gt; {cardId-&gt;</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="176" x="1135.8461" y="132.5737">requireNotNull(cardId)</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="152" x="1135.8461" y="149.5474">invalidCard(cardId)</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="8" x="1119.8461" y="166.521">}</text><!--MD5=[33c2fb760a7074ec24359010ff9693f6]
link UNLOCKED to LOCKED--><path d="M455.6881,335.8854 C428.0051,331.5282 395.5311,321.0799 377.8501,296.6094 C351.0391,259.5044 355.9531,233.8104 377.8501,193.6094 C395.4261,161.3394 431.7641,139.8404 461.0851,126.9824 " fill="none" id="UNLOCKED-to-LOCKED" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="465.7261,124.9924,455.8781,124.8618,461.1305,126.9623,459.03,132.2147,465.7261,124.9924" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="208" x="378.8501" y="224.6792">«timeout = {timeout}» -&gt; {</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="216" x="394.8501" y="241.6528">println("Timeout. Locking")</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="48" x="394.8501" y="258.6265">lock()</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="8" x="378.8501" y="275.6001">}</text><!--MD5=[33c2fb760a7074ec24359010ff9693f6]
link UNLOCKED to LOCKED--><path d="M553.8741,331.8991 C575.4171,326.2428 598.7531,315.8189 611.8501,296.6094 C637.6361,258.7854 632.1091,234.6604 611.8501,193.6094 C598.5881,166.7394 571.8291,146.2354 548.3891,132.4514 " fill="none" id="UNLOCKED-to-LOCKED-1" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="544.0551,129.9554,549.8594,137.9122,548.3884,132.4499,553.8506,130.9789,544.0551,129.9554" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="120" x="629.8501" y="207.6792">CARD [{cardId-&gt;</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="184" x="645.8501" y="224.6528">requireNotNull(cardId);</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="184" x="645.8501" y="241.6265">isOverrideCard(cardId);</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="56" x="629.8501" y="258.6001">}] -&gt; {</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="48" x="645.8501" y="275.5737">lock()</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="8" x="629.8501" y="292.5474">}</text><!--MD5=[33c2fb760a7074ec24359010ff9693f6]
link UNLOCKED to LOCKED--><path d="M554.0011,335.8848 C641.4391,330.5325 816.5981,317.3311 834.8501,296.6094 C865.1071,262.2574 863.0481,229.6714 834.8501,193.6094 C799.8461,148.8434 630.8531,125.0324 549.1991,115.9764 " fill="none" id="UNLOCKED-to-LOCKED-2" style="stroke:#383838;stroke-width:1.0;"/><polygon fill="#383838" points="543.9501,115.4014,552.4613,120.3571,548.9204,115.9455,553.332,112.4046,543.9501,115.4014" style="stroke:#383838;stroke-width:1.0;"/><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="72" x="856.8501" y="233.1792">PASS -&gt; {</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="48" x="872.8501" y="250.1528">lock()</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="8" x="856.8501" y="267.1265">}</text><!--MD5=[2ae6bd47809ba229752d67a74f3d04fc]
@startuml
skinparam monochrome true
skinparam StateFontName Helvetica
skinparam defaultFontName Monospaced
skinparam defaultFontStyle Bold
skinparam state {
    FontColor Black
    FontStyle Bold
}
state TimerSecureTurnstileFSM {
LOCKED - -> LOCKED : CARD [{cardId->\l  requireNotNull(cardId);\l  isOverrideCard(cardId)&&overrideActive;\l}] -> {\l  cancelOverride()\l}
LOCKED - -> LOCKED : CARD [{cardId->\l  requireNotNull(cardId);\l  isOverrideCard(cardId);\l}] -> {\l  activateOverride()\l}
LOCKED - -> UNLOCKED : CARD [{cardId->\l  requireNotNull(cardId);\l  overrideActive||isValidCard(cardId);\l}] -> {\l  unlock()\l}
LOCKED - -> LOCKED : CARD [{cardId->\l  requireNotNull(cardId){"cardId is required"};\l  !isValidCard(cardId);\l}] -> {cardId->\l  requireNotNull(cardId)\l  invalidCard(cardId)\l}
UNLOCKED - -> LOCKED : <<timeout = {timeout}>> -> {\l  println("Timeout. Locking")\l  lock()\l}
UNLOCKED - -> LOCKED : CARD [{cardId->\l  requireNotNull(cardId);\l  isOverrideCard(cardId);\l}] -> {\l  lock()\l}
UNLOCKED - -> LOCKED : PASS -> {\l  lock()\l}
}
@enduml

PlantUML version 1.2021.7(Sun May 23 14:40:07 CAT 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: en
Country: ZA
--></g></svg>